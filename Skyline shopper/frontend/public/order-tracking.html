<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Order | Skyline Shopper</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="website icon" type="png " href="images/logo2 - Copy.png">
  <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
<script src="order-updates.js" defer></script>

  <style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh; /* Ensures full height */
}

.main-content {
    display: flex;
    flex-direction: column;
    justify-content: center; /* Centers vertically */
    align-items: center; /* Centers horizontally */
    flex: 1; /* Takes remaining height between navbar and footer */
    padding: 40px 0; /* Prevents box from touching the edges */
}

.container1 {
    width: 50%;
    max-width: 700px;
    padding: 40px; /* Added padding for spacing */
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    
    /* Updated centering logic */
    margin: 0 auto; /* Centers the box horizontally */
}

/* Mobile Responsive Fix */
@media (max-width: 768px) {
    .container1 {
        width: 90%; /* Makes the box take more width on small screens */
        padding: 30px;
    }
}

h1 {
    font-size: 28px;
    text-align: center;
    margin-bottom: 20px;
}

.order-id-input {
    text-align: center;
    margin-bottom: 30px;
}

.order-id-input input {
    width: 70%;
    padding: 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.order-id-input button {
    padding: 12px 20px;
    font-size: 16px;
    color: white;
    background-color: #FF9900;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.order-id-input button:hover {
    background-color: #e6891d;
}

.status-container {
    display: none;
}

.status-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
}

.status-item span {
    font-size: 16px;
    font-weight: 500;
}

.order-details {
    margin-top: 20px;
    display: none;
}

.order-items {
    margin-top: 15px;
}

.order-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.order-item img {
    width: 60px;
    height: 60px;
    border-radius: 4px;
    margin-right: 15px;
}

.order-item p {
    margin: 0;
}

/* Footer Styling */

.footer {
    text-align: center;
    padding: 20px;
    background: black;
    color: white;
}
.order-item {
  display: flex;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #ddd;
}

.order-item img {
  width: 60px;
  height: 60px;
  border-radius: 4px;
  margin-right: 15px;
}

.item-container {
  display: flex;
  align-items: center;
  gap: 15px;
}

.item-details {
  display: flex;
  flex-direction: column;
}

.item-name {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 5px;
}



  </style>
</head>
<body>

  <div class="container">
    <div class="navbar">
        <div class="logo">
            <a href="index.html"><img src="images/logo2.png" width="300px"></a>
        </div>
        <nav>
            <ul id="MenuItems">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="contact.html">Contacts</a></li>
                <li><a href="about.html">About</a></li>
                <!-- <li><a href="account.html">Account</a></li> -->
            </ul>
        </nav>
        <a href="cart.html"><img src="images/cart.png" width="30px" height="30px"></a>
        <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
    </div>
</div>
  <div class="container1">
    <h1>Track Your Order</h1>
    <div class="order-id-input">
      <input type="text" id="order-id-input" placeholder="Enter Order ID">
      <button onclick="trackOrder()">Track Order</button>
    </div>
    <div id="status-container" class="status-container">
      <div id="status-list"></div>
    </div>
    <div id="order-details" class="order-details"></div>
      <h2>Order Details</h2>
      <div id="order-items" class="order-items"></div>
  </div>
  <br>
  <br>
  <div class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col-1">
                <h3>Download Our App</h3>
                <p>Download App For Android and iOS Mobile Phones.</p>
                <div class="app-logo">
                    <a href="https://play.google.com/store" target="_blank">
                        <img src="images/play-store.png">
                    </a>
                    <a href="https://www.apple.com/app-store/" target="_blank">
                        <img src="images/app-store.png" alt="App Store">
                    </a>
                </div>
            </div>
            <div class="footer-col-2">
                <img src="images/logo3white.png">
                <p>Our Purpose is to sustainably make the pleasure and benefits of sports accessible to the many.</p>
            </div>
            <div class="footer-col-3">
              <h3>Useful Links</h3>
              <ul>
                  <li><a href="">Coupons</a></li>
                  <li><a href="">Blog Post</a></li>
                  <li><a href="">Return Policy</a></li>
                  <li><a href="">Join Affiliate</a></li>
              </ul>
          </div>
          <div class="footer-col-3">
              <h3>Follow Us</h3>
              <ul>
                  <li><a href="https://www.facebook.com" target="_blank">Facebook</a></li>
                  <li><a href="https://twitter.com" target="_blank">Twitter</a></li>
                  <li><a href="https://www.instagram.com/_prince_ptl__/" target="_blank">Instagram</a></li>
                  <li><a href="https://www.youtube.com" target="_blank">YouTube</a></li>
              </ul>
          </div>
        </div>
        <hr>
        <p class="copyright">Copyright 2024 - Skyline Shopper</p>
    </div>
</div>
<script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
<script src="order-updates.js" defer></script>
  <script>

document.addEventListener("DOMContentLoaded", function () {
    function menutoggle() {
        let menu = document.getElementById('MenuItems');
        if (menu.style.display === "block") {
            menu.style.display = "none";
        } else {
            menu.style.display = "block";
        }
    }
});

function menutoggle() {
            let menu = document.getElementById('MenuItems');
            menu.classList.toggle('show'); // Toggle the 'show' class
        }

        async function trackOrder() {
  const orderId = document.getElementById('order-id-input').value.trim();
  if (!orderId) {
    alert('Please enter a valid Order ID.');
    return;
  }

  try {
    const response = await fetch(`http://localhost:3000/getOrder/${orderId}`);
    const data = await response.json();

    if (data.success) {
      const order = data.order;

      // Display order status
      const statusContainer = document.getElementById('status-container');
      const statusList = document.getElementById('status-list');
      statusContainer.style.display = 'block';

      statusList.innerHTML = `
        <div class="status-item">
          <span>Order Status:</span>
          <span>${order.orderStatus}</span>
        </div>
      `;

      // Display order details
      const orderDetails = document.getElementById('order-details');
      const orderItems = document.getElementById('order-items');
      orderDetails.style.display = 'block';
      orderItems.innerHTML = '';

      // ðŸ”¥ SORT items alphabetically before displaying
      order.items.sort((a, b) => a.name.localeCompare(b.name));

      order.items.forEach((item) => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('order-item');
        itemDiv.innerHTML = `
          <div class="item-container">
            <img src="${item.image || 'default.jpg'}" alt="${item.name}">
            <div class="item-details">
              <p class="item-name"><strong>${item.name}</strong></p>
              <p>Price: â‚¹${item.price}</p>
              <p>Quantity: ${item.quantity}</p>
            </div>
          </div>
        `;
        orderItems.appendChild(itemDiv);
      });
    } else {
      alert(data.message);
    }
  } catch (error) {
    console.error('Error tracking order:', error);
    alert('An error occurred while tracking the order.');
  }
}
    document.addEventListener("contextmenu", function (event) {
    if (event.target.tagName === "IMG") {
        event.preventDefault();
    }
});
  </script>
  <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
  <script>
      const socket = io('http://localhost:3000');
  
      // Listen for new orders
      socket.on('newOrder', (order) => {
          console.log("ðŸ†• New Order:", order);
          alert(`New order received: ${order.orderID}`);
          // Optionally, refresh the order list
          location.reload();
      });
  
      // Listen for order status updates
      socket.on('orderStatusUpdated', (data) => {
          console.log(`ðŸ”„ Order ${data.orderID} updated to ${data.newStatus}`);
          alert(`Order ${data.orderID} is now ${data.newStatus}`);
          // Optionally, refresh the order list
          location.reload();
      });
  </script>
  
</body>
</html>
